# Mock æ¨¡å¼æˆåŠŸå®ç°æ€»ç»“

## âœ… å·²å®ç°çš„åŠŸèƒ½

### 1. Mock æ¨¡å¼åŸºç¡€è®¾æ–½
- âœ… **Impersonate åŠŸèƒ½**: æˆåŠŸå®ç°åœ°å€æ¨¡æ‹Ÿï¼Œæ— éœ€çœŸå®ç§é’¥
- âœ… **è‡ªåŠ¨å……å€¼**: ä¸º impersonate åœ°å€è‡ªåŠ¨å……å€¼ ETH ç”¨äº Gas è´¹
- âœ… **ç¯å¢ƒå˜é‡é…ç½®**: æ”¯æŒä» `.env` è¯»å– `MOCK_WALLET_ADDRESS`
- âœ… **æ¨¡å¼åˆ‡æ¢**: æ”¯æŒ `--mock` å‚æ•°åœ¨çœŸå®ç­¾åå’Œ Mock æ¨¡å¼é—´åˆ‡æ¢

### 2. äº¤æ˜“å¤„ç†
- âœ… **ç»Ÿä¸€äº¤æ˜“æ„å»º**: `_build_transaction()` æ–¹æ³•æ”¯æŒä¸¤ç§æ¨¡å¼
- âœ… **ç»Ÿä¸€äº¤æ˜“å‘é€**: `_send_transaction()` è‡ªåŠ¨å¤„ç†ç­¾å/éç­¾åå‘é€
- âœ… **Gas ä¼°ç®—**: æ˜¾ç¤ºè¯¦ç»†çš„ Gas è´¹ç”¨ä¿¡æ¯
- âœ… **äº¤æ˜“ç¡®è®¤**: ç­‰å¾…åŒºå—é“¾ç¡®è®¤å¹¶æ˜¾ç¤ºç»“æœ

### 3. ä½™é¢æŸ¥è¯¢
- âœ… **USDT ä½™é¢**: æˆåŠŸæŸ¥è¯¢ Binance çƒ­é’±åŒ… 22,794,505,957.50 USDT
- âœ… **ETH ä½™é¢**: æˆåŠŸæŸ¥è¯¢ 638,622.38 ETH
- âœ… **æˆæƒé¢åº¦**: å®æ—¶æŸ¥è¯¢åˆçº¦æˆæƒçŠ¶æ€

### 4. USDT æˆæƒ
- âœ… **æˆæƒæˆåŠŸ**: æˆåŠŸæˆæƒ 50,000 USDT ç»™ Concrete_STABLE åˆçº¦
- âœ… **äº¤æ˜“ç¡®è®¤**: Gas ä½¿ç”¨ 48,561ï¼ŒåŒºå— 23,643,988
- âœ… **çŠ¶æ€æ›´æ–°**: æˆæƒåä½™é¢çŠ¶æ€æ­£ç¡®æ›´æ–°

## âš ï¸ å‘ç°çš„é—®é¢˜

### å­˜æ¬¾å‡½æ•°é—®é¢˜
- âŒ **äº¤æ˜“å›æ»š**: `deposit` å‡½æ•°è°ƒç”¨è¢«å›æ»š
- ğŸ” **åŸå› åˆ†æ**: å¯èƒ½çš„åŸå› åŒ…æ‹¬ï¼š
  1. åˆçº¦ ABI ä¸åŒ¹é…ï¼ˆå‡½æ•°ç­¾åé”™è¯¯ï¼‰
  2. åˆçº¦é€»è¾‘è¦æ±‚å…¶ä»–å‰ç½®æ¡ä»¶
  3. ä»£ç†åˆçº¦æ¨¡å¼éœ€è¦ç‰¹æ®Šå¤„ç†
  4. åˆçº¦å¯èƒ½å·²æš‚åœæˆ–æœ‰è®¿é—®æ§åˆ¶

## ğŸ“Š æµ‹è¯•ç»“æœ

### Mock æ¨¡å¼æµ‹è¯•
```bash
# âœ… ä½™é¢æŸ¥è¯¢
python concrete_stable_interaction.py balance --mock
# ç»“æœ: æˆåŠŸæ˜¾ç¤º Binance çƒ­é’±åŒ…ä½™é¢

# âœ… USDT æˆæƒ
python concrete_stable_interaction.py approve 50000 --mock
# ç»“æœ: äº¤æ˜“æˆåŠŸï¼Œæˆæƒé¢åº¦æ­£ç¡®æ›´æ–°

# âŒ USDT å­˜æ¬¾
python concrete_stable_interaction.py deposit 20000 --mock
# ç»“æœ: äº¤æ˜“å›æ»šï¼Œéœ€è¦è¿›ä¸€æ­¥è°ƒè¯•åˆçº¦
```

### ç¯å¢ƒé…ç½®
```bash
# .env æ–‡ä»¶é…ç½®
WEB3_RPC_URL = http://127.0.0.1:8545     # æœ¬åœ° Ganache åˆ†å‰
WEB3_NETWORK_ID = 31337                   # æœ¬åœ°ç½‘ç»œ ID
MOCK_WALLET_ADDRESS = 0xF977814e90dA44bFA03b6295A0616a897441aceC  # Binance çƒ­é’±åŒ…
```

## ğŸ”§ æŠ€æœ¯å®ç°

### Mock æ¨¡å¼æ ¸å¿ƒåŠŸèƒ½
```python
def _enable_impersonate(self):
    """å¯ç”¨ Impersonate æ¨¡å¼"""
    # 1. è°ƒç”¨ hardhat_impersonateAccount
    self.web3.provider.make_request("hardhat_impersonateAccount", [self.wallet_address])
    
    # 2. è‡ªåŠ¨å……å€¼ ETH ç”¨äº Gas è´¹
    self.web3.provider.make_request("hardhat_setBalance", [
        self.wallet_address,
        hex(Web3.toWei(10, 'ether'))
    ])

def _send_transaction(self, txn):
    """å‘é€äº¤æ˜“ï¼ˆæ”¯æŒ Mock å’ŒçœŸå®æ¨¡å¼ï¼‰"""
    if self.mock_mode:
        # Mock æ¨¡å¼ï¼šç›´æ¥å‘é€äº¤æ˜“
        tx_hash = self.web3.eth.send_transaction(txn)
    else:
        # çœŸå®æ¨¡å¼ï¼šç­¾ååå‘é€
        signed_txn = self.web3.eth.account.sign_transaction(txn, self.private_key)
        tx_hash = self.web3.eth.send_raw_transaction(signed_txn.rawTransaction)
```

### æ¨¡å¼é€‰æ‹©é€»è¾‘
```python
# åˆå§‹åŒ–æ—¶é€‰æ‹©æ¨¡å¼
if mock_mode:
    self.wallet_address = self._get_mock_wallet_address()
    self.private_key = None
    print(f"ğŸ­ Mockæ¨¡å¼ - ä½¿ç”¨Impersonate")
else:
    self.private_key = self._get_private_key()
    self.account = Account.from_key(self.private_key)
    self.wallet_address = self.account.address
    print(f"ğŸ” çœŸå®ç­¾åæ¨¡å¼")
```

## ğŸ¯ ä½¿ç”¨å»ºè®®

### å¼€å‘æµ‹è¯•é˜¶æ®µ
1. âœ… ä½¿ç”¨ Mock æ¨¡å¼è¿›è¡Œåˆçº¦åŠŸèƒ½æµ‹è¯•
2. âœ… é€‰æ‹©æœ‰è¶³å¤Ÿä½™é¢çš„åœ°å€è¿›è¡Œæµ‹è¯•
3. âœ… åœ¨æœ¬åœ°åˆ†å‰ç¯å¢ƒä¸­å®‰å…¨æµ‹è¯•

### ç”Ÿäº§ç¯å¢ƒ
1. ğŸ” ä½¿ç”¨çœŸå®ç­¾åæ¨¡å¼
2. ğŸ”’ ç¡®ä¿ç§é’¥å®‰å…¨ç®¡ç†
3. âš–ï¸ æµ‹è¯•ç½‘éªŒè¯åå†ä¸Šä¸»ç½‘

## ğŸš€ ä¸‹ä¸€æ­¥å·¥ä½œ

### åˆçº¦è°ƒè¯•
1. ğŸ” è·å–å®Œæ•´çš„ Concrete_STABLE åˆçº¦ ABI
2. ğŸ” æ£€æŸ¥åˆçº¦æ˜¯å¦æœ‰ç‰¹æ®Šè¦æ±‚ï¼ˆç™½åå•ã€æ—¶é—´é™åˆ¶ç­‰ï¼‰
3. ğŸ” åˆ†æä»£ç†åˆçº¦çš„å…·ä½“å®ç°æ¨¡å¼

### åŠŸèƒ½å¢å¼º
1. ğŸ“Š æ·»åŠ æ›´è¯¦ç»†çš„é”™è¯¯åˆ†æ
2. ğŸ”„ æ”¯æŒæ›´å¤šåˆçº¦æ“ä½œï¼ˆwithdrawã€claim ç­‰ï¼‰
3. ğŸ“ˆ æ·»åŠ äº¤æ˜“å†å²è®°å½•åŠŸèƒ½

### å®‰å…¨æ”¹è¿›
1. ğŸ” æ”¯æŒç¡¬ä»¶é’±åŒ…é›†æˆ
2. ğŸ›¡ï¸ æ·»åŠ äº¤æ˜“æ¨¡æ‹Ÿå’Œé£é™©è¯„ä¼°
3. ğŸ“‹ äº¤æ˜“å‰ç¡®è®¤æœºåˆ¶

## æ€»ç»“

Mock æ¨¡å¼å®ç°éå¸¸æˆåŠŸï¼Œä¸ºåˆçº¦å¼€å‘å’Œæµ‹è¯•æä¾›äº†å¼ºå¤§çš„å·¥å…·ï¼š

- âœ… **æ— éœ€çœŸå®ç§é’¥**å³å¯æµ‹è¯•åˆçº¦äº¤äº’
- âœ… **æ”¯æŒä»»æ„åœ°å€æ¨¡æ‹Ÿ**ï¼Œå¯ä»¥æµ‹è¯•å„ç§åœºæ™¯
- âœ… **å®Œæ•´çš„äº¤æ˜“æµç¨‹**ï¼ŒåŒ…æ‹¬ Gas ä¼°ç®—å’Œç¡®è®¤
- âœ… **å¼€å‘å‹å¥½**ï¼Œæ˜¾è‘—é™ä½äº†æµ‹è¯•æˆæœ¬å’Œé£é™©

è¿™ä¸ªå·¥å…·ä¸ºå®‰å…¨çš„ DeFi åˆçº¦å¼€å‘æä¾›äº†é‡è¦æ”¯æŒï¼ğŸ‰